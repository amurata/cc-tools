> **[English](../../../../plugins/data-engineering/commands/data-driven-feature.md)** | **日本語**

# データ駆動型機能開発

データインサイト、A/Bテスト、継続的な測定に導かれた機能を、分析、実装、実験のための専門エージェントを使用して構築します。

[Extended thinking: このワークフローは、初期のデータ分析と仮説形成から、統合されたアナリティクス、A/Bテストインフラストラクチャ、およびローンチ後の分析を備えた機能実装まで、包括的なデータ駆動開発プロセスを調整します。各フェーズは、データインサイトに基づいて機能が構築され、測定のために適切に計測され、制御された実験を通じて検証されることを保証するために専門エージェントを活用します。このワークフローは、モダンなプロダクトアナリティクスのプラクティス、テストにおける統計的厳密性、ユーザー行動からの継続的な学習を強調します。]

## フェーズ1：データ分析と仮説形成

### 1. 探索的データ分析
- Task toolを使用、subagent_type="machine-learning-ops::data-scientist"
- プロンプト："機能：$ARGUMENTSの探索的データ分析を実行してください。既存のユーザー行動データを分析し、パターンと機会を特定し、行動によってユーザーをセグメント化し、ベースラインメトリクスを計算してください。モダンなアナリティクスツール（Amplitude、Mixpanel、Segment）を使用して、現在のユーザージャーニー、コンバージョンファネル、エンゲージメントパターンを理解してください。"
- 出力：視覚化を含むEDAレポート、ユーザーセグメント、行動パターン、ベースラインメトリクス

### 2. ビジネス仮説開発
- Task toolを使用、subagent_type="business-analytics::business-analyst"
- コンテキスト：データサイエンティストのEDA発見と行動パターン
- プロンプト："機能：$ARGUMENTSのデータ分析に基づいてビジネス仮説を策定してください。明確な成功メトリクス、主要なビジネスKPIへの予想される影響、対象ユーザーセグメント、最小検出効果を定義してください。ICEスコアリングやRICE優先順位付けなどのフレームワークを使用して、測定可能な仮説を作成してください。"
- 出力：仮説ドキュメント、成功メトリクス定義、予想ROI計算

### 3. 統計的実験設計
- Task toolを使用、subagent_type="machine-learning-ops::data-scientist"
- コンテキスト：ビジネス仮説と成功メトリクス
- プロンプト："機能：$ARGUMENTSの統計的実験を設計してください。統計的検出力のために必要なサンプルサイズを計算し、対照群と処置群を定義し、ランダム化戦略を指定し、多重検定の修正を計画してください。より速い意思決定のためにベイズA/Bテストアプローチを検討してください。主要メトリクスとガードレールメトリクスの両方を設計してください。"
- 出力：実験設計ドキュメント、検出力分析、統計的検定計画

## フェーズ2：機能アーキテクチャとアナリティクス設計

### 4. 機能アーキテクチャ計画
- Task toolを使用、subagent_type="data-engineering::backend-architect"
- コンテキスト：ビジネス要件と実験設計
- プロンプト："$ARGUMENTSの機能アーキテクチャをA/Bテスト機能とともに設計してください。フィーチャーフラグ統合（LaunchDarkly、Split.io、またはOptimizely）、段階的ロールアウト戦略、安全性のためのサーキットブレーカー、対照群と処置群のロジック間の明確な分離を含めてください。アーキテクチャがリアルタイム設定更新をサポートすることを保証してください。"
- 出力：アーキテクチャ図、フィーチャーフラグスキーマ、ロールアウト戦略

### 5. アナリティクス計測設計
- Task toolを使用、subagent_type="data-engineering::data-engineer"
- コンテキスト：機能アーキテクチャと成功メトリクス
- プロンプト："$ARGUMENTSの包括的なアナリティクス計測を設計してください。ユーザーインタラクションのイベントスキーマを定義し、セグメンテーションと分析のためのプロパティを指定し、ファネル追跡とコンバージョンイベントを設計し、コホート分析機能を計画してください。適切なイベント分類法を持つモダンSDK（Segment、Amplitude、Mixpanel）を使用して実装してください。"
- 出力：イベント追跡計画、アナリティクススキーマ、計測ガイド

### 6. データパイプラインアーキテクチャ
- Task toolを使用、subagent_type="data-engineering::data-engineer"
- コンテキスト：アナリティクス要件と既存のデータインフラストラクチャ
- プロンプト："機能：$ARGUMENTSのデータパイプラインを設計してください。ライブメトリクスのためのリアルタイムストリーミング（Kafka、Kinesis）、詳細な分析のためのバッチ処理、データウェアハウス統合（Snowflake、BigQuery）、該当する場合はMLのための特徴量ストアを含めてください。適切なデータガバナンスとGDPRコンプライアンスを保証してください。"
- 出力：パイプラインアーキテクチャ、ETL/ELT仕様、データフロー図

## フェーズ3：計測を伴う実装

### 7. バックエンド実装
- Task toolを使用、subagent_type="backend-development::backend-architect"
- コンテキスト：アーキテクチャ設計と機能要件
- プロンプト："機能：$ARGUMENTSの完全な計測を伴うバックエンドを実装してください。決定ポイントでのフィーチャーフラグチェック、すべてのユーザーアクションの包括的なイベント追跡、パフォーマンスメトリクス収集、エラー追跡と監視を含めてください。実験分析のための適切なロギングを実装してください。"
- 出力：アナリティクスを備えたバックエンドコード、フィーチャーフラグ統合、監視セットアップ

### 8. フロントエンド実装
- Task toolを使用、subagent_type="frontend-mobile-development::frontend-developer"
- コンテキスト：バックエンドAPIとアナリティクス要件
- プロンプト："機能：$ARGUMENTSのアナリティクス追跡を伴うフロントエンドを構築してください。すべてのユーザーインタラクションのイベント追跡、該当する場合はセッション記録統合、パフォーマンスメトリクス（Core Web Vitals）、適切なエラーバウンダリを実装してください。対照群と処置群間の一貫した体験を保証してください。"
- 出力：アナリティクスを備えたフロントエンドコード、A/Bテストバリアント、パフォーマンス監視

### 9. MLモデル統合（該当する場合）
- Task toolを使用、subagent_type="machine-learning-ops::ml-engineer"
- コンテキスト：機能要件とデータパイプライン
- プロンプト："必要に応じて機能：$ARGUMENTSのMLモデルを統合してください。低レイテンシのオンライン推論、モデルバージョン間のA/Bテスト、モデルパフォーマンス追跡、自動フォールバックメカニズムを実装してください。ドリフト検出のためのモデル監視を設定してください。"
- 出力：MLパイプライン、モデルサービングインフラストラクチャ、監視セットアップ

## フェーズ4：ローンチ前検証

### 10. アナリティクス検証
- Task toolを使用、subagent_type="data-engineering::data-engineer"
- コンテキスト：実装された追跡とイベントスキーマ
- プロンプト："$ARGUMENTSのアナリティクス実装を検証してください。ステージングですべてのイベント追跡をテストし、データ品質と完全性を検証し、ファネル定義を検証し、適切なユーザー識別とセッション追跡を保証してください。データパイプラインのエンドツーエンドテストを実行してください。"
- 出力：検証レポート、データ品質メトリクス、追跡カバレッジ分析

### 11. 実験セットアップ
- Task toolを使用、subagent_type="cloud-infrastructure::deployment-engineer"
- コンテキスト：フィーチャーフラグと実験設計
- プロンプト："$ARGUMENTSの実験インフラストラクチャを設定してください。適切なターゲティングルールを持つフィーチャーフラグを設定し、トラフィック割り当てを設定（5-10%から開始）し、キルスイッチを実装し、主要メトリクスのための監視アラートを設定してください。ランダム化と割り当てロジックをテストしてください。"
- 出力：実験設定、監視ダッシュボード、ロールアウト計画

## フェーズ5：ローンチと実験

### 12. 段階的ロールアウト
- Task toolを使用、subagent_type="cloud-infrastructure::deployment-engineer"
- コンテキスト：実験設定と監視セットアップ
- プロンプト："機能：$ARGUMENTSの段階的ロールアウトを実行してください。内部ドッグフーディングから開始し、次にベータユーザー（1-5%）、徐々にターゲットトラフィックまで増加させてください。エラーレート、パフォーマンスメトリクス、早期指標を監視してください。異常時の自動ロールバックを実装してください。"
- 出力：ロールアウト実行、監視アラート、ヘルスメトリクス

### 13. リアルタイム監視
- Task toolを使用、subagent_type="observability-monitoring::observability-engineer"
- コンテキスト：デプロイされた機能と成功メトリクス
- プロンプト："$ARGUMENTSの包括的な監視を設定してください。実験メトリクスのリアルタイムダッシュボードを作成し、統計的有意性のアラートを設定し、負の影響のためのガードレールメトリクスを監視し、システムパフォーマンスとエラーレートを追跡してください。Datadog、New Relic、またはカスタムダッシュボードなどのツールを使用してください。"
- 出力：監視ダッシュボード、アラート設定、SLO定義

## フェーズ6：分析と意思決定

### 14. 統計的分析
- Task toolを使用、subagent_type="machine-learning-ops::data-scientist"
- コンテキスト：実験データと元の仮説
- プロンプト："$ARGUMENTSのA/Bテスト結果を分析してください。信頼区間を含む統計的有意性を計算し、セグメントレベルの効果を確認し、二次メトリクスの影響を分析し、予期しないパターンを調査してください。頻度主義的アプローチとベイズアプローチの両方を使用してください。該当する場合は多重検定を考慮してください。"
- 出力：統計分析レポート、有意性検定、セグメント分析

### 15. ビジネスインパクト評価
- Task toolを使用、subagent_type="business-analytics::business-analyst"
- コンテキスト：統計分析とビジネスメトリクス
- プロンプト："機能：$ARGUMENTSのビジネスインパクトを評価してください。実際のROIと予想ROIを計算し、主要なビジネスメトリクスへの影響を分析し、運用オーバーヘッドを含むコストベネフィットを評価し、長期的な価値を予測してください。完全ロールアウト、反復、またはロールバックについての推奨を行ってください。"
- 出力：ビジネスインパクトレポート、ROI分析、推奨ドキュメント

### 16. ローンチ後最適化
- Task toolを使用、subagent_type="machine-learning-ops::data-scientist"
- コンテキスト：ローンチ結果とユーザーフィードバック
- プロンプト："データに基づいて$ARGUMENTSの最適化機会を特定してください。処置群のユーザー行動パターンを分析し、ユーザージャーニーの摩擦ポイントを特定し、データに基づく改善を提案し、フォローアップ実験を計画してください。長期的な影響のためにコホート分析を使用してください。"
- 出力：最適化推奨、フォローアップ実験計画

## 設定オプション

```yaml
experiment_config:
  min_sample_size: 10000
  confidence_level: 0.95
  runtime_days: 14
  traffic_allocation: "gradual"  # gradual、fixed、またはadaptive

analytics_platforms:
  - amplitude
  - segment
  - mixpanel

feature_flags:
  provider: "launchdarkly"  # launchdarkly、split、optimizely、unleash

statistical_methods:
  - frequentist
  - bayesian

monitoring:
  - real_time_metrics: true
  - anomaly_detection: true
  - automatic_rollback: true
```

## 成功基準

- **データカバレッジ**：適切なイベントスキーマでユーザーインタラクションの100%を追跡
- **実験の妥当性**：適切なランダム化、十分な統計的検出力、サンプル比率の不一致なし
- **統計的厳密性**：明確な有意性検定、適切な信頼区間、多重検定の修正
- **ビジネスインパクト**：ガードレールメトリクスを劣化させることなく、ターゲットメトリクスの測定可能な改善
- **技術的パフォーマンス**：p95レイテンシの劣化なし、エラーレート0.1%未満
- **意思決定速度**：計画された実験期間内の明確なgo/no-go決定
- **学習成果**：将来の機能開発のための文書化されたインサイト

## 調整に関する注意事項

- データサイエンティストとビジネスアナリストは仮説形成で協力
- エンジニアはアナリティクスを第一級の要件として実装、後付けではない
- フィーチャーフラグは完全なデプロイなしで安全な実験を可能にする
- リアルタイム監視により、必要に応じて迅速な反復とロールバックが可能
- 統計的厳密性とビジネスの実用性および市場投入速度のバランス
- 継続的な学習ループが次の機能開発サイクルにフィードバック

開発する機能（データ駆動アプローチで）：$ARGUMENTS
