> **[English](../../../../plugins/full-stack-orchestration/commands/full-stack-feature.md)** | **日本語**

モダンなAPI優先アプローチによるバックエンド、フロントエンド、インフラストラクチャレイヤーにわたるフルスタック機能開発をオーケストレーション:

[拡張思考: このワークフローは、アーキテクチャからデプロイメントまで完全なフルスタック機能を提供するために、複数の専門エージェントを調整します。API仕様がバックエンド実装とフロントエンド消費の両方を駆動するコントラクト駆動開発を保証する、API優先開発原則に従います。各フェーズは前の出力に基づいて構築され、適切な関心の分離、包括的なテスト、本番環境対応のデプロイメントによる一貫したシステムを作成します。このワークフローは、コンポーネント駆動UI開発、フィーチャーフラグ、可観測性、プログレッシブロールアウト戦略などのモダンプラクティスを強調します。]

## フェーズ1: アーキテクチャ & 設計基盤

### 1. データベースアーキテクチャ設計
- subagent_type="database-design::database-architect"でTaskツールを使用
- プロンプト: "$ARGUMENTSのためのデータベーススキーマとデータモデルを設計。スケーラビリティ、クエリパターン、インデックス戦略、データ一貫性要件を考慮。既存のスキーマを変更する場合はマイグレーション戦略を含める。論理および物理データモデルの両方を提供。"
- 期待される出力: エンティティ関係図、テーブルスキーマ、インデックス戦略、マイグレーションスクリプト、データアクセスパターン
- コンテキスト: 初期要件とビジネスドメインモデル

### 2. バックエンドサービスアーキテクチャ
- subagent_type="backend-development::backend-architect"でTaskツールを使用
- プロンプト: "$ARGUMENTSのためのバックエンドサービスアーキテクチャを設計。前のステップのデータベース設計を使用して、サービス境界を作成し、APIコントラクト（OpenAPI/GraphQL）を定義し、認証/認可戦略を設計し、サービス間通信パターンを指定。レジリエンスパターン（サーキットブレーカー、リトライ）とキャッシング戦略を含める。"
- 期待される出力: サービスアーキテクチャ図、OpenAPI仕様、認証フロー、キャッシングアーキテクチャ、メッセージキュー設計（該当する場合）
- コンテキスト: ステップ1のデータベーススキーマ、非機能要件

### 3. フロントエンドコンポーネントアーキテクチャ
- subagent_type="frontend-mobile-development::frontend-developer"でTaskツールを使用
- プロンプト: "$ARGUMENTSのためのフロントエンドアーキテクチャとコンポーネント構造を設計。前のステップのAPIコントラクトに基づいて、コンポーネント階層、状態管理アプローチ（Redux/Zustand/Context）、ルーティング構造、データフェッチングパターンを設計。アクセシビリティ要件とレスポンシブデザイン戦略を含める。Storybookコンポーネントドキュメントを計画。"
- 期待される出力: コンポーネントツリー図、状態管理設計、ルーティング設定、デザインシステム統合計画、アクセシビリティチェックリスト
- コンテキスト: ステップ2のAPI仕様、UI/UX要件

## フェーズ2: 並行実装

### 4. バックエンドサービス実装
- subagent_type="python-development::python-pro"（またはスタックに基づいて"golang-pro"/"nodejs-expert"）でTaskツールを使用
- プロンプト: "$ARGUMENTSのためのバックエンドサービスを実装。フェーズ1のアーキテクチャとAPI仕様を使用して、適切な検証、エラー処理、ロギングを備えたRESTful/GraphQLエンドポイントを構築。ビジネスロジック、データアクセスレイヤー、認証ミドルウェア、外部サービスとの統合を実装。可観測性（構造化ログ、メトリクス、トレーシング）を含める。"
- 期待される出力: バックエンドサービスコード、APIエンドポイント、ミドルウェア、バックグラウンドジョブ、ユニットテスト、統合テスト
- コンテキスト: フェーズ1のアーキテクチャ設計、データベーススキーマ

### 5. フロントエンド実装
- subagent_type="frontend-mobile-development::frontend-developer"でTaskツールを使用
- プロンプト: "$ARGUMENTSのためのフロントエンドアプリケーションを実装。フェーズ1のコンポーネントアーキテクチャを使用してReact/Next.jsコンポーネントを構築。状態管理、適切なエラー処理とローディング状態を備えたAPI統合、フォーム検証、レスポンシブレイアウトを実装。コンポーネントのためのStorybookストーリーを作成。アクセシビリティ（WCAG 2.1 AA準拠）を確保。"
- 期待される出力: Reactコンポーネント、状態管理実装、APIクライアントコード、Storybookストーリー、レスポンシブスタイル、アクセシビリティ実装
- コンテキスト: ステップ3のコンポーネントアーキテクチャ、APIコントラクト

### 6. データベース実装 & 最適化
- subagent_type="database-design::sql-pro"でTaskツールを使用
- プロンプト: "$ARGUMENTSのためのデータベースレイヤーを実装および最適化。マイグレーションスクリプトを作成し、ストアドプロシージャ（必要に応じて）を作成し、バックエンド実装で識別されたクエリを最適化し、適切なインデックスを設定し、データ検証制約を実装。データベースレベルのセキュリティ対策とバックアップ戦略を含める。"
- 期待される出力: マイグレーションスクリプト、最適化されたクエリ、ストアドプロシージャ、インデックス定義、データベースセキュリティ設定
- コンテキスト: ステップ1のデータベース設計、バックエンド実装からのクエリパターン

## フェーズ3: 統合 & テスト

### 7. APIコントラクトテスト
- subagent_type="test-automator"でTaskツールを使用
- プロンプト: "$ARGUMENTSのためのコントラクトテストを作成。バックエンドとフロントエンド間のAPIコントラクトを検証するためにPact/Dreddテストを実装。すべてのAPIエンドポイントの統合テストを作成し、認証フローをテストし、エラーレスポンスを検証し、適切なCORS設定を確保。負荷テストシナリオを含める。"
- 期待される出力: コントラクトテストスイート、統合テスト、負荷テストシナリオ、APIドキュメント検証
- コンテキスト: フェーズ2のAPI実装

### 8. エンドツーエンドテスト
- subagent_type="test-automator"でTaskツールを使用
- プロンプト: "$ARGUMENTSのためのE2Eテストを実装。重要なユーザージャーニー、クロスブラウザ互換性、モバイルレスポンシブネス、エラーシナリオをカバーするPlaywright/Cypressテストを作成。フィーチャーフラグ統合、アナリティクス追跡、パフォーマンスメトリクスをテスト。ビジュアルリグレッションテストを含める。"
- 期待される出力: E2Eテストスイート、ビジュアルリグレッションベースライン、パフォーマンスベンチマーク、テストレポート
- コンテキスト: フェーズ2のフロントエンドとバックエンド実装

### 9. セキュリティ監査 & ハードニング
- subagent_type="security-auditor"でTaskツールを使用
- プロンプト: "$ARGUMENTSのためのセキュリティ監査を実施。APIセキュリティ（認証、認可、レート制限）をレビューし、OWASP Top 10脆弱性をチェックし、XSS/CSRFリスクのためにフロントエンドを監査し、入力サニタイゼーションを検証し、シークレット管理をレビュー。侵入テスト結果と修復手順を提供。"
- 期待される出力: セキュリティ監査レポート、脆弱性評価、修復推奨事項、セキュリティヘッダー設定
- コンテキスト: フェーズ2のすべての実装

## フェーズ4: デプロイメント & 運用

### 10. インフラストラクチャ & CI/CDセットアップ
- subagent_type="deployment-engineer"でTaskツールを使用
- プロンプト: "$ARGUMENTSのためのデプロイインフラストラクチャを設定。Dockerコンテナ、Kubernetesマニフェスト（またはクラウド固有の設定）を作成し、自動テストゲートを備えたCI/CDパイプラインを実装し、フィーチャーフラグ（LaunchDarkly/Unleash）を設定し、モニタリング/アラートを設定。Blue-Greenデプロイ戦略とロールバック手順を含める。"
- 期待される出力: Dockerfile、K8sマニフェスト、CI/CDパイプライン設定、フィーチャーフラグ設定、IaCテンプレート（Terraform/CloudFormation）
- コンテキスト: 前のフェーズのすべての実装とテスト

### 11. 可観測性 & モニタリング
- subagent_type="deployment-engineer"でTaskツールを使用
- プロンプト: "$ARGUMENTSのための可観測性スタックを実装。分散トレーシング（OpenTelemetry）を設定し、アプリケーションメトリクス（Prometheus/DataDog）を設定し、集中ログ（ELK/Splunk）を実装し、主要メトリクスのダッシュボードを作成し、SLI/SLOを定義。アラートルールとオンコール手順を含める。"
- 期待される出力: 可観測性設定、ダッシュボード定義、アラートルール、ランブック、SLI/SLO定義
- コンテキスト: ステップ10のインフラストラクチャセットアップ

### 12. パフォーマンス最適化
- subagent_type="performance-engineer"でTaskツールを使用
- プロンプト: "$ARGUMENTSのためのスタック全体のパフォーマンスを最適化。データベースクエリを分析および最適化し、キャッシング戦略（Redis/CDN）を実装し、フロントエンドバンドルサイズとロードパフォーマンスを最適化し、遅延読み込みとコード分割を設定し、バックエンドサービスパフォーマンスをチューニング。ビフォー/アフターメトリクスを含める。"
- 期待される出力: パフォーマンス改善、キャッシング設定、CDNセットアップ、最適化されたバンドル、パフォーマンスメトリクスレポート
- コンテキスト: ステップ11のモニタリングデータ、負荷テスト結果

## 設定オプション
- `stack`: 技術スタックを指定（例: "React/FastAPI/PostgreSQL"、"Next.js/Django/MongoDB"）
- `deployment_target`: クラウドプラットフォーム（AWS/GCP/Azure）またはオンプレミス
- `feature_flags`: フィーチャーフラグ統合を有効/無効化
- `api_style`: RESTまたはGraphQL
- `testing_depth`: 包括的または必須
- `compliance`: 特定のコンプライアンス要件（GDPR、HIPAA、SOC2）

## 成功基準
- コントラクトテストを通じて検証されたすべてのAPIコントラクト
- フロントエンドとバックエンドの統合テストが合格
- 重要なユーザージャーニーをカバーするE2Eテスト
- 重大な脆弱性なしでセキュリティ監査に合格
- 定義されたSLOを満たすパフォーマンスメトリクス
- すべての主要メトリクスをキャプチャする可観測性スタック
- プログレッシブロールアウトのために設定されたフィーチャーフラグ
- すべてのコンポーネントの完全なドキュメント
- 自動品質ゲートを備えたCI/CDパイプライン
- 検証されたゼロダウンタイムデプロイ機能

## 調整ノート
- 各フェーズは前のフェーズの出力に基づいて構築
- フェーズ2の並行タスクは同時に実行できるが、フェーズ3のために収束する必要がある
- 要件と実装間のトレーサビリティを維持
- 分散トレーシングのためにすべてのサービスで相関IDを使用
- ADRですべてのアーキテクチャ決定を文書化
- サービス全体で一貫したエラー処理とAPIレスポンスを確保

実装する機能: $ARGUMENTS
